<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- Favicon -->
    <link rel="icon" type="image/png" href="/assets/img/tkd_parana_logo.png" sizes="32x32" />

    <!-- Tipografías Google -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
        href="https://fonts.googleapis.com/css2?family=Exo+2:wght@400;700&family=Poppins:wght@400;600&family=Roboto:wght@400;500&display=swap"
        rel="stylesheet" />

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous" />

    <!-- SCSS -->
    <link rel="stylesheet" href="/assets/scss/styles.css" />

    <!-- FontAwesome -->
    <script src="https://kit.fontawesome.com/84d1de6f8d.js" crossorigin="anonymous"></script>

    <!-- Meta -->
    <meta name="description"
        content="Sitio oficial TaekwondoParaná: teoría, foro, evaluaciones y contacto institucional." />
    <meta name="author" content="Esteban Olguin" />

    <!-- Título -->
    <title>TaekwondoParaná - Inicio de sesión</title>
</head>

<body>

    <!-- ===== HEADER ===== -->
    <my-header></my-header>

    <!-- ===== MAIN ===== -->
    <main id="main" class="main my-5">

        <section class="section container">
            <!-- Formulario de inicio de sesión -->
            <form id="login-form" class="bg-light rounded-3 shadow-sm p-4 p-md-5">

                <!-- Título -->
                <h2 class="mb-4 text-primary fw-bold text-center">Iniciar sesión</h2>
                <p class="text-secondary text-center mb-4">
                    Accedé a tu cuenta para participar en el foro, consultar evaluaciones y gestionar tu perfil.
                </p>

                <!-- Campo: Correo electrónico -->
                <div class="mb-3">
                    <label for="email" class="form-label fw-semibold">Correo electrónico</label>
                    <input type="email" class="form-control" id="email" name="email" placeholder="Ej: juan@example.com"
                        required>
                </div>

                <!-- Campo: Contraseña -->
                <div class="mb-3">
                    <label for="password" class="form-label fw-semibold">Contraseña</label>
                    <input type="password" class="form-control" id="password" name="password" placeholder="********"
                        required>
                </div>

                <!-- Recordar sesión y recuperar contraseña -->
                <div class="d-flex justify-content-between align-items-center mb-4 flex-column flex-md-row gap-2">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="remember" name="remember">
                        <label class="form-check-label small" for="remember">Recordar sesión</label>
                    </div>
                    <a href="/auth/recuperar_password.html"
                        class="text-decoration-none text-primary small fw-semibold">¿Olvidaste tu
                        contraseña?</a>
                </div>

                <!-- Botones -->
                <div class="d-flex justify-content-center gap-3 mt-3">
                    <button type="submit" class="btn px-4">
                        <i class="fas fa-sign-in-alt me-2 btn--flex"></i>Iniciar sesión
                    </button>
                    <button type="reset" class="btn px-4">
                        <i class="fas fa-eraser me-2 btn--flex"></i>Limpiar
                    </button>
                </div>

                <!-- Registro -->
                <p class="text-muted small mt-4 text-center">
                    ¿No tenés cuenta?
                    <a href="/auth/registro.html" class="fw-semibold text-decoration-none">Registrate
                        acá</a>
                </p>

            </form>
        </section>

        <!-- Script para manejar el formulario de inicio de sesión -->
        <script type="module">
            // Importar Firebase App y Auth
            import { initializeApp } from "https://www.gstatic.com/firebasejs/12.1.0/firebase-app.js";
            import {
                getAuth,
                signInWithEmailAndPassword
            } from "https://www.gstatic.com/firebasejs/12.1.0/firebase-auth.js";

            // Configuración de Firebase
            const firebaseConfig = {
                apiKey: "AIzaSyABTVN53G-WVa_9917ehc0AEkvFCv2OTvU",
                authDomain: "taekwondoparana-b8e30.firebaseapp.com",
                projectId: "taekwondoparana-b8e30",
                storageBucket: "taekwondoparana-b8e30.appspot.com",
                messagingSenderId: "3478244979",
                appId: "1:3478244979:web:30460edc2b6a4166452406",
                measurementId: "G-39ZVM00JSL"
            };

            // Inicializar Firebase
            const app = initializeApp(firebaseConfig);
            const auth = getAuth(app);

            // Capturar el formulario
            const form = document.getElementById("login-form");

            // Escuchar el envío del formulario
            form.addEventListener("submit", async (event) => {
                event.preventDefault();

                // Obtener datos del formulario
                const email = form.email.value.trim();
                const password = form.password.value.trim();

                try {
                    // Iniciar sesión con Firebase
                    const userCredential = await signInWithEmailAndPassword(auth, email, password);

                    // Obtener nombre del usuario
                    const nombre = userCredential.user.displayName || "Usuario";
                    console.log("Bienvenido:", nombre);

                    // Redirigir al inicio
                    window.location.href = "/index.html";

                } catch (error) {
                    // Mostrar error en pantalla
                    const errorBox = document.createElement("div");
                    errorBox.className = "text-danger text-center mt-3";
                    errorBox.textContent = error.message;
                    form.appendChild(errorBox);
                }
            });
        </script>

    </main>

    <!--==================== FOOTER ====================-->
    <my-footer></my-footer>

    <!--==================== JS ====================-->
    <script src="/assets/js/main.js"></script>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ndDqU0Gzau9qJ1lfW4pNLlhNTkCfHzAVBReH9diLvGRem5+R9g2FzA8ZGN954O5Q"
        crossorigin="anonymous"></script>

    <!-- SweetAlert2 -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <!-- Components -->
    <script type="module" src="/assets/js/components/my-header.js"></script>
    <script type="module" src="/assets/js/components/my-footer.js"></script>

    <!-- Firebase -->
    <script type="module" src="/assets/js/firebase-init.js"></script>
</body>

</html>